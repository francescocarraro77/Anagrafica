<!DOCTYPE html>
<html>

<head>
<script>

async function getPersons()
{
  
	let url='http://localhost:3000/api/listapersonelocale';
	try {
		let res=await fetch(url);
		return await res.text();
	} catch (error) {
		alert("Estrazione non possibile");
	}

}

async function listaPersone()
{
	let persons=await getPersons();
  persons=JSON.parse(persons);

/*
  for (var i=0;i<persons.length;i++)
  {
    alert(persons[i].id);
    alert(persons[i].cognome);
    alert(persons[i].nome);

  }
*/

  var anagraficahtml="";

  for (var i=0;i<persons.length;i++)
  {

    anagraficahtml+=persons[i].id; anagraficahtml+=" ";
    anagraficahtml+=persons[i].cognome; anagraficahtml+=" ";
    anagraficahtml+=persons[i].nome; anagraficahtml+="<br>";

    document.getElementById("anagrafica").innerHTML=anagraficahtml;
   

  }

}

/*
Per creare bottone:
<p>Click sul pulsante per eliminare delle persone</p>
<button type="button" onclick="eliminaPersone()">Cliccami</button>

*/

</script> 
</head>

<body>
<h1>Lista persone (HTML) - Locale</h1>
<body onLoad="listaPersone();"></body>

<div id="anagrafica"></div>


</body>

</html>